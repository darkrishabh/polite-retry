<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polite Retry - Smart retries for distributed systems</title>
  <meta name="description" content="A TypeScript retry library that prevents retry amplification and cascading failures in distributed systems.">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">
        <span class="logo-icon">ü§ù</span>
        <span>Polite Retry</span>
      </a>
      <div class="nav-links">
        <a href="index.html" class="active">Home</a>
        <a href="guide.html">Guide</a>
        <a href="api.html">API</a>
        <a href="examples.html">Examples</a>
        <a href="https://github.com/darkrishabh/polite-retry" class="github-link" target="_blank">
          <svg height="20" width="20" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
          </svg>
          GitHub
        </a>
      </div>
    </div>
  </nav>

  <header class="hero">
    <div class="hero-content">
      <h1>Polite Retry</h1>
      <p class="hero-subtitle">Retries that don't overwhelm your servers</p>
      <p class="hero-description">
        A smart retry library for TypeScript that prevents retry amplification 
        and cascading failures in distributed systems.
      </p>
      <div class="hero-buttons">
        <a href="guide.html" class="btn btn-primary">Get Started</a>
        <a href="api.html" class="btn btn-secondary">API Reference</a>
      </div>
      <div class="install-command">
        <code>npm install polite-retry</code>
        <button class="copy-btn" onclick="copyInstall()">Copy</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="features">
      <h2>Why Polite Retry?</h2>
      <div class="feature-grid">
        <div class="feature-card">
          <div class="feature-icon">üõ°Ô∏è</div>
          <h3>Prevents Retry Storms</h3>
          <p>Adaptive Retry Budgeting limits retry volume to prevent cascading failures when services are struggling.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">‚ö°</div>
          <h3>Circuit Breaker</h3>
          <p>Built-in circuit breaker pattern stops requests to failing services, allowing them time to recover.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üé≤</div>
          <h3>Smart Jitter</h3>
          <p>Multiple jitter strategies prevent synchronized retries that cause periodic load spikes.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üìä</div>
          <h3>Backpressure Aware</h3>
          <p>Respects backpressure signals from downstream services to avoid overwhelming them.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üìà</div>
          <h3>Built-in Metrics</h3>
          <p>Track retry rates, success rates, and retry amplification factor for observability.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üîß</div>
          <h3>TypeScript First</h3>
          <p>Full TypeScript support with comprehensive type definitions and excellent IDE integration.</p>
        </div>
      </div>
    </section>

    <section class="problem-section">
      <h2>The Problem: Retry Amplification</h2>
      <div class="problem-content">
        <div class="problem-text">
          <p>When a service experiences partial failure, naive retry policies can make things <strong>much worse</strong>:</p>
          <ol>
            <li>Service starts failing 50% of requests</li>
            <li>All clients retry failed requests</li>
            <li>Service now receives 2x the load</li>
            <li>More requests fail, triggering more retries</li>
            <li><strong>Cascade collapse</strong></li>
          </ol>
          <p>In a 3-tier system with 50% failure rate and 3 retries per tier, request volume can amplify by <strong>6.6x</strong>.</p>
        </div>
        <div class="problem-diagram">
          <pre class="diagram">
Normal:     100 req ‚Üí Service ‚Üí 100 responses ‚úì

With naive retries during 50% failure:
            100 req ‚îÄ‚îÄ‚îê
            100 retry ‚îº‚îÄ‚îÄ‚ñ∫ Service ‚îÄ‚îÄ‚ñ∫ Overload! üí•
            100 retry ‚îò
          </pre>
        </div>
      </div>
    </section>

    <section class="solution-section">
      <h2>The Solution: Adaptive Retry Budgeting</h2>
      <p>Polite Retry implements the ARB algorithm that dynamically limits retries based on observed failure rates:</p>
      <div class="code-example">
        <pre><code class="language-typescript">import { retryWithBudget, AdaptiveRetryBudget } from 'polite-retry';

// Create a shared budget (one per downstream service)
const budget = new AdaptiveRetryBudget({
  initialBudget: 0.2,        // Allow 20% retry overhead
  highFailureThreshold: 0.3, // Reduce budget when >30% failing
});

// All requests share this budget
const data = await retryWithBudget(
  async () => {
    const res = await fetch('https://api.example.com/data');
    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    return res.json();
  },
  budget,
  { maxRetries: 3, jitter: 'full' }
);

// Check metrics
console.log(budget.getMetrics());
// { retryAmplificationFactor: 1.15, failureRate: 0.08, ... }</code></pre>
      </div>
    </section>

    <section class="comparison-section">
      <h2>Choose Your Strategy</h2>
      <div class="comparison-table">
        <table>
          <thead>
            <tr>
              <th>Strategy</th>
              <th>Use Case</th>
              <th>Amplification Risk</th>
              <th>Complexity</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>retry()</code></td>
              <td>Simple retries with backoff</td>
              <td class="risk-medium">Medium</td>
              <td>Low</td>
            </tr>
            <tr>
              <td><code>retryWithCircuitBreaker()</code></td>
              <td>Stop when service is down</td>
              <td class="risk-low">Low</td>
              <td>Medium</td>
            </tr>
            <tr>
              <td><code>retryWithBudget()</code></td>
              <td>Production microservices</td>
              <td class="risk-verylow">Very Low</td>
              <td>Medium</td>
            </tr>
            <tr>
              <td><code>retryWithProtection()</code></td>
              <td>Critical systems</td>
              <td class="risk-verylow">Very Low</td>
              <td>Higher</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="quickstart-section">
      <h2>Quick Start</h2>
      <div class="code-example">
        <pre><code class="language-typescript">import { retry } from 'polite-retry';

// Basic retry with exponential backoff and jitter
const data = await retry(
  async () => {
    const response = await fetch('https://api.example.com/data');
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    return response.json();
  },
  {
    maxRetries: 3,
    initialDelayMs: 100,
    jitter: 'full', // Prevents synchronized retry storms
    onRetry: (error, attempt) => {
      console.log(`Attempt ${attempt} failed: ${error.message}`);
    }
  }
);</code></pre>
      </div>
      <div class="cta-buttons">
        <a href="guide.html" class="btn btn-primary">Read the Full Guide</a>
        <a href="examples.html" class="btn btn-secondary">See More Examples</a>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>Based on research from "Retry Amplification in Distributed Systems"</p>
      <p>Created by <a href="https://github.com/darkrishabh">Rishabh Mehan</a> ‚Ä¢ MIT License</p>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
  <script>
    function copyInstall() {
      navigator.clipboard.writeText('npm install polite-retry');
      const btn = document.querySelector('.copy-btn');
      btn.textContent = 'Copied!';
      setTimeout(() => btn.textContent = 'Copy', 2000);
    }
  </script>
</body>
</html>
